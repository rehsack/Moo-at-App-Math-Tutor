\documentclass[ngerman,xcolor={table,dvipsnames},scriptsizeer,compress,hyperref={bookmarks,colorlinks}]{beamer}

\usepackage{url}
\usepackage{listings}
\usepackage[latin9]{inputenc}
\usepackage{xcolor,textcomp}
%\usepackage{auto-pst-pdf}
\usepackage{graphicx}
\usepackage{pstricks}
\usepackage{pst-node}
\usepackage{pst-uml}
\usepackage{pst-tree}
\usepackage{tabularx,threeparttable}
\usepackage{hyperref}

\title{Moo in practice - App::Math::Tutor}
\author{Jens Rehsack}
\date{2014}

\usetheme[secheader]{Boadilla}
\setbeamertemplate{navigation symbols}{}

\newcommand{\perlfilename}[1]{{\color{cyan}{\textit{\begingroup \urlstyle{sf}\Url{#1}}}}}
\newcommand{\xsfilename}[1]{{\color{olive}{\textit{\begingroup \urlstyle{sf}\Url{#1}}}}}
\newcommand{\hfilename}[1]{{\color{olive}{\textit{\begingroup \urlstyle{sf}\Url{#1}}}}}
\newcommand{\cfilename}[1]{{\color{magenta}{\textit{\begingroup \urlstyle{sf}\Url{#1}}}}}

\makeatletter
\makeatother

%\newcommand{\mypart}[1]{\part{#1}\frame{\partpage \tableofcontents}}
\newcommand{\mysection}[1]{\section{#1}\frame{\frametitle{Overview}\tableofcontents[sectionstyle=show/shaded,subsectionstyle=show/shaded/shaded]}}
\newcommand{\mysubsection}[1]{\subsection{#1}\frame{\frametitle{Overview}\tableofcontents[sectionstyle=show/shaded,subsectionstyle=show/shaded/shaded]}}
\newcommand{\mysubsubsection}[1]{\subsubsection{#1}\frame{\frametitle{Overview}\tableofcontents[sectionstyle=show/shaded,subsectionstyle=show/shaded/shaded]}}

\begin{document}

\psset{angleA=90,angleB=-90}
\lstset{language=Perl,
        basicstyle=\ttfamily,
        keywordstyle=\color{Maroon},
        commentstyle=\color{Blue}, 
        stringstyle=\color{Green},
        showstringspaces=false}

%\AtBeginSection[]{\begin{frame}<beamer> \frametitle{Overview} \tableofcontents[current, currentsubsection] \end{frame}}
%\AtBeginSubsection[]{\begin{frame}<beamer> \frametitle{Overview} \tableofcontents[current, currentsubsection] \end{frame}}
\AtBeginPart{\begin{frame}<beamer> \frametitle{Overview} \partpage \tableofcontents[current] \end{frame}}

\frame{\maketitle}

\part{Introduction}

\section{Introduction}

\small
\begin{frame}[fragile]
\frametitle{Audience}
\begin{block}<1->{Audience}
\begin{itemize}
\item Developer who wants to create or improve Perl5 software
\item Developer who wants to learn how to develop modern OO with Perl5
\item Developer who're interested in developing mathematical exercises
\end{itemize}
\end{block}

\begin{block}<2->{Prerequisites of the Audience}
Following knowledge is expected:
\begin{itemize}
\item General knowledge about object oriented programming or concepts like
      \begin{itemize}
      \item methods
      \item attributes
      \item classes
      \item objects
      \item polymorphism
      \item inheritance
      \item roles
      \end{itemize}
\item slightly above basic Perl experience
\uncover<3->{\item ever heard of Smalltalk and its OO-concept is a strong bonus}
\end{itemize}
\end{block}
\end{frame}

\begin{frame}[fragile]
\frametitle{Motivation}

\begin{block}<1->{Moo and App::Math::Tutor}
\begin{itemize}
\item real world examples over far-fetched conceptuals
\item MooX::Cmd, MooX::Options and MooX::ConfigFromFile provide way more features and flexibility than either
      \begin{itemize}
      \item App::Cmd with Getopt::Long::Descriptive
      \item MooseX::App::Cmd along with corresponding MooseX warppers around related stuff
      \end{itemize}
\item $ 2^{nd} $ generation of modern OO in Perl5
\end{itemize}
\end{block}

\begin{block}<2->{App::Math::Tutor}
\begin{itemize}
\item Allow parents help their children improving their mathematical skills
\item Add support for exercise types as children require
\item provide extensible design to allow easy augment of exercise
\uncover<3->{\item \textbf{Goal:} Improve to Web-Service, eg. by mapping MooX::Cmd to URI path and MooX::Options to GET parameters}
\end{itemize}
\end{block}

\end{frame}

\part{Moo basics}

\section{Attributes}

\begin{frame}[fragile]

\begin{block}<1->{Attributes in Moo}
\begin{lstlisting}[language=Perl,inputencoding=latin9,escapeinside={(*@}{@*)}]
package VulFrac;

use Moo;

has(*@\pnode(0,0){A}{}@*) nume(*@\pnode(0,0){B}{}@*)rator => ( is => "(*@\pnode(0,0){D}{}@*)ro", (*@\pnode(0,0){F}{}@*)required => 1 );
has denom(*@\pnode(0,0){C}{}@*)inator => ( is => "(*@\pnode(0,0){E}{}@*)ro", required => (*@\pnode(0,0){G}{}@*)1 );

1;
\end{lstlisting}
\end{block}

\begin{itemize}
\uncover<2->{\item use \rnode{a}{"has"} keyword to define a attribute}
\uncover<3->{\item attributes \rnode{b}{"numerator"} and \rnode{c}{"denominator"}}
\uncover<4->{\item attributes are \rnode{d}{immutable} \uncover<5->{and \rnode{f}{required}}}
\uncover<2>{\nccurve[linecolor=olive]{->}{a}{A}}
\uncover<3>{\nccurve[linecolor=teal]{->}{b}{B}\nccurve[linecolor=teal]{->}{c}{C}}
\uncover<4>{\nccurve[linecolor=blue]{->}{d}{D}\nccurve[linecolor=blue]{->}{d}{E}}
\uncover<5>{\nccurve[linecolor=cyan]{->}{f}{F}\nccurve[linecolor=cyan]{->}{f}{G}}
\end{itemize}

\end{frame}

\begin{frame}[fragile]

\begin{block}<1->{Attribute options I}
\begin{description}
\item[is] \textbf{required} behavior description
    \begin{description}
    \uncover<2->{\item[ro] defines the attribute is read only}
    \uncover<3->{\item[rw] defined the attribute is read-/writable}
    \uncover<4->{\item[lazy] defines the attribute is read only with a lazy initialization}
    \uncover<5->{\item[rwp] defines the attribute being read only for public and read-/writable for private use}
    \end{description}
\uncover<6->{\item[required] when set to a true value, attribute must be passed on instantiation}
\uncover<7->{\item[isa] defines a subroutine (\texttt{coderef}) which is called to validate values to set}
\uncover<8->{\item[coerce] defines a subrouting (\texttt{coderef}) which forces attribute values}
\uncover<9->{\item[handles] defines a \textbf{role} or methods to dispatch to the attribute}
\end{description}
\end{block}

\end{frame}

\begin{frame}[fragile]

\begin{block}<1->{Attribute options II}
\begin{description}
\item[trigger] takes a subroutine (\texttt{coderef}) which called anytime the attribute is set \\
    \uncover<2->{\textbf{special}: the value of $ 1 $ means to generate a (\texttt{coderef}) which calles the method \texttt{\_trigger\_\$\{attr\_name\}} (This is called \textit{attribute shortcut})}
\uncover<3->{\item[default] subroutine (\texttt{coderef}) which is called to initialize an attribute}
\uncover<4->{\item[predicate] takes a method name (\texttt{string}) which will return true if an attribute has a value (supports \textit{attribute shortcut})}
\uncover<5->{\item[builder] takes a method name (\texttt{string}) which is called to initialize an attribute (supports \textit{attribute shortcut})}
\uncover<6->{\item[clearer] takes a method name (\texttt{string}) which will clear the attribute (supports \textit{attribute shortcut})}
\uncover<7->{\item[lazy] takes a bool value which delays attribute initialization to first time it's grabbed when \texttt{true}}
\end{description}
\end{block}

\end{frame}

\begin{frame}[fragile]

\begin{block}<1->{Attribute options III}
\begin{description}
\item[reader] takes a method name for another than default getter name (\texttt{\_get\_\$\{attr\_name\}} instead of \texttt{\$\{attr\_name\}} to get some Java smell)
\uncover<2->{\item[writer]  takes a method name for another than default setter name (\texttt{\_set\_\$\{attr\_name\}} instead of \texttt{\$\{attr\_name\}} to get some C++ smell)}
\uncover<3->{\item[weak\_ref] should be set to a true value when circular references are possible by attribute value (to avoid leaks)}
\uncover<4->{\item[init\_arg] Takes the name of the key to look for at instantiation time of the object. A common use of this is to make an underscored attribute have a non-underscored initialization name. undef means that passing the value in on instantiation is ignored.}
\uncover<5->{\item[moosify] Takes either a coderef or array of coderefs which is meant to transform the given attributes specifications if necessary when upgrading to a Moose role or class. You shouldn't need this by default, but is provided as a means of possible extensibility.}
\end{description}
\end{block}

\end{frame}

\section{Methods}

\begin{frame}[t,fragile]

\begin{columns}[t]
\begin{column}{.8\textwidth}
\begin{block}{Methods in Moo I}
\scriptsize
\begin{lstlisting}[language=Perl,inputencoding=latin9,escapeinside={(*@}{@*)}]
package VulFrac;

use Moo;
use overload '""'   => "_stringify(*@\pnode(0,0){A}{}@*)",
             '0+'   => "_numify",
             'bool' => sub { 1 },
             '<=>'  => "_num_compare";

has numerator => ( is => "ro", required => 1 );
has denominator => ( is => "ro", required => 1,
  isa => sub { $_[0] != 0 or die "Not != 0" };

sub _stringify { my $self = shift;
  return sprintf("\\frac{%s}{%s}",
  $self->numerator, $self->denominator); }

sub _numify { $_[0]->numerator / $_[0]->denominator; }
...
\end{lstlisting}
\end{block}
\end{column}

\begin{column}{.18\textwidth}
\uncover<2->{\begin{figure}[ht]
\rnode{a}{\includegraphics[width=\textwidth]{getStringFromObj.eps}}
\caption{\small{For Wendy \& Java developers - what does operator overloading mean?}}
\end{figure}}
\end{column}
\end{columns}

\uncover<2->{\nccurve[linecolor=red]{->}{A}{a}}
\end{frame}

\begin{frame}[fragile]

\begin{block}<1->{Methods in Moo II}
\scriptsize
\begin{lstlisting}[language=Perl,inputencoding=latin9,escapeinside={(*@}{@*)}]
package Rationale;

use Moo;

extends "VulFrac";

has digits => ( is => "ro", required => 1 );

sub _stringify {
  my $digits = $_[0]->digits;
  sprintf("%.${digits}g", $_[0]->_numify); }

\end{lstlisting}
\end{block}

\onslide<2->{
\begin{itemize}
\item nothing like \texttt{MooseX::Declare} - pure Perl5 keywords are enough for plain methods
\end{itemize}
}

\end{frame}

\begin{frame}[t,fragile]

\begin{block}<1->{Method Modifiers}
Method modifiers are a convenient feature from the CLOS (Common Lisp Object System) world:
\begin{description}
\uncover<2->{\item[before] \texttt{before method(s) => sub \{ \ldots \}} \\
before is called before the method it is modifying. Its return value is totally ignored.}
\uncover<3->{\item[after] \texttt{after method(s) => sub \{ \ldots \}} \\
after is called after the method it is modifying. Its return value is totally ignored.}
\uncover<4->{\item[around] \texttt{around method(s) => sub \{ \ldots \}} \\
around is called instead of the method it is modifying. The method you're overriding is passed as \texttt{coderef} in the first argument.}
\uncover<5->{\item[-] No support for \texttt{super}, \texttt{override}, \texttt{inner} or \texttt{augment}}
\end{description}
\end{block}

\end{frame}

\begin{frame}[t,fragile]

\begin{block}<1->{Method Modifiers - Advantages}
\begin{itemize}
\item supersedes \texttt{\$self->SUPER::foo(@\_)} syntax
\uncover<2->{\item cleaner interface than SUPER}
\uncover<3->{\item allows multiple modifiers in single namespace}
\uncover<4->{\item also possible from within roles and not restricted to inheritance}
\uncover<5->{\item ensures that inherited methods invocation happens right (mostly - remember around)}
\end{itemize}
\end{block}

\end{frame}

\begin{frame}[fragile]

\begin{block}<1->{Methods Modifiers - around avoid calling \texttt{\$orig}}
\scriptsize
\begin{lstlisting}[language=Perl,inputencoding=latin9,escapeinside={(*@}{@*)}]
package App::Math::Tutor::Role::Roman;

use Moo::Role;

with "App::Math::Tutor::Role::Natural";

{ package RomanNum;
  use Moo;
  extends "NatNum"; # derives overloading!
  sub _stringify { ... } }

around "_guess_natural_number" => sub {
    my $orig    = shift;
    my $max_val = $_[0]->format;
    my $value   = int( rand( $max_val - 1 ) ) + 1;
    return RomanNum->new( value => $value );
};
\end{lstlisting}
\end{block}

\begin{itemize}
\uncover<2->{\item captures control}
\uncover<3->{\item receives responsibility}
\uncover<4->{\item runtime of modified method completely eliminated}
\end{itemize}

\end{frame}

\begin{frame}[fragile]

\begin{block}<1->{Methods Modifiers - around modifying \texttt{\$orig} return value}
\scriptsize
\begin{lstlisting}[language=Perl,inputencoding=latin9,escapeinside={(*@}{@*)}]
package App::Math::Tutor::Role::Roman;

use Moo::Role;

with "App::Math::Tutor::Role::Natural";

{ package RomanNum;
  use Moo;
  extends "NatNum"; # derives overloading!
  sub _stringify { ... } }

around "_guess_natural_number" => sub {
    my $orig = shift;
    my $num  = $orig->(@_);
    return RomanNum->new( value => $num->value );
};
\end{lstlisting}
\end{block}

\begin{itemize}
\uncover<2->{\item modifies only required part}
\uncover<3->{\item leaves most responsibility in modified method}
\uncover<4->{\item runtime of modified method added to this method's runtime}
\end{itemize}

\end{frame}

\part{Math Tutor}

\section{Structure}

\begin{frame}[fragile]

\begin{block}<1->{Frontend (dictated by MooX::Cmd)}
\scriptsize
\def\psedge#1#2{\ncdiagg[nodesep=3pt,angleA=180,armA=0]{#2}{#1}}
\pstree[treemode=R,levelsep=*0.2cm,treesep=0.5cm]{\Tr{App::Math::Tutor}}{%
    \pstree[levelsep=*0.2cm]
	{\Tr{App::Math::Tutor::Cmd::VulFrac}}
	{\Tr{App::Math::Tutor::Cmd::VulFrac::Cmd::Add} \Tr{App::Math::Tutor::Cmd::VulFrac::Cmd::Mul} \Tr{App::Math::Tutor::Cmd::VulFrac::Cmd::Cast}}
    \pstree[levelsep=*0.2cm]
	{\Tr{App::Math::Tutor::Cmd::Natural}}
	{\Tr{App::Math::Tutor::Cmd::Natural::Cmd::Add} \Tr{App::Math::Tutor::Cmd::Natural::Cmd::Mul}}
    \pstree[levelsep=*0.2cm]
	{\Tr{App::Math::Tutor::Cmd::Roman}}
	{\Tr{App::Math::Tutor::Cmd::Roman::Cmd::Add} \Tr{App::Math::Tutor::Cmd::Roman::Cmd::Cast}}
    \pstree[levelsep=*0.2cm]
	{\Tr{App::Math::Tutor::Cmd::Unit}}
	{\Tr{App::Math::Tutor::Cmd::Unit::Cmd::Add} \Tr{App::Math::Tutor::Cmd::Unit::Cmd::Mul} \Tr{App::Math::Tutor::Cmd::Unit::Cmd::Cast}}
}

\end{block}

\end{frame}

\begin{frame}[fragile]

\begin{block}<1->{Exercise groups}
\begin{description}
\item[App::Math::Tutor::Cmd::VulFrac] Exercises in vulgar fraction calculation
\item[App::Math::Tutor::Cmd::Natural] Exercises in calculations using natural numbers
\item[App::Math::Tutor::Cmd::Roman] Exercises in calculations using natural numbers, but show them using roman number encoding (exercises and solutions)
\item[App::Math::Tutor::Cmd::Unit] Exercises in calculations using units (times, currency, \ldots)
\item[App::Math::Tutor::Cmd::Power] Exercises in calculations of power mathematics
\item[App::Math::Tutor::Cmd::Polynom] Exercises for polynomial mathematics (Zero of a function, Vertex, \ldots)
\end{description}
\end{block}

\end{frame}

\section{Design}

\begin{frame}[fragile]

\begin{block}<1->{Typical Exercise design}
\begin{pspicture}(12,7)%\psgrid
\scriptsize
 \rput(8.5,6.25){\rnode{A}{%
  \umlClass{App::Math::Tutor::Cmd::VulFrac::Cmd::Add}{\hline
 \_build\_exercise() : exercise
 }}}
 \rput(8.5,4.5){\rnode{B}{%
  \umlClass{App::Math::Tutor::Role::VulfracExercise}{
  format\\\hline
  \\\hline
 }}}
 \rput(3,1){\rnode{C}{%
  \umlClass{App::Math::Tutor::Role::Vulfrac}{\hline
 \_check\_vulgar\_fraction() : bool \\
 \_guess\_vulgar\_fraction() : VulFrac \\
 get\_vulgar\_fractions() : [ VulFrac ]
 }}}
 \rput(2.5,5){\rnode{D}{%
  \umlClass{VulFrac}{
  num\\
  denum\\
  \hline
  \_stringify() : Str \\
  \_numify() : Num \\
  \_num\_compare() : Int \\
  \_euklid() : Int \\
  \_gcd() : Int \\
  \_reduce() : VulFrac \\
  \_reciprocal() : VulFrac \\
 }}}
 \rput(9,1.5){\rnode{E}{%
  \umlClass{App::Math::Tutor::Role::Exercise}{
  exercise : lazy \\
  \# \{ section, caption, label, \\
  \#    header, challenges, solutions \}\\
  output\_name : lazy\\
  template\_filename : lazy\\
  \hline
  \_build\_exercise() = 0 : exercise\\
  \_build\_output\_name() : Str\\
  \_build\_template\_filename() = 0 : Str\\
  execute()
 }}}
\end{pspicture}
\ncN{B}{A} % App::Math::Tutor::Cmd::VulFrac::Cmd::Add -> App::Math::Tutor::Role::VulfracExercise
\ncputicon[npos=0]{umlV}
\ncNXE{C}{B} % App::Math::Tutor::Role::VulfracExercise -> App::Math::Tutor::Role::Vulfrac
\ncputicon[npos=0]{umlV}
\ncNXW{E}{B} % App::Math::Tutor::Role::VulfracExercise -> App::Math::Tutor::Role::Exercise
\ncputicon[npos=0]{umlV}
\ncSXE{D}{B}
\ncputicon[npos=0]{umlAgreg}
\ncline[linestyle=dashed]{D}{A}
\end{block}

\end{frame}

\begin{frame}[fragile]

\begin{block}<1->{Derived Exercise design}
\resizebox{\textwidth}{!}{
\begin{pspicture}(16,10)%\psgrid
\scriptsize
 \rput(13,9){\rnode{A}{%
  \umlClass{App::Math::Tutor::Cmd::Roman::Cmd::Add}{\hline
 \_build\_exercise() : exercise
 }}}
 \rput(13,6){\rnode{B}{%
  \umlClass{App::Math::Tutor::Role::NaturalExercise}{
  format\\\hline
  \\\hline
 }}}
 \rput(4,3.5){\rnode{C}{%
  \umlClass{App::Math::Tutor::Role::Roman}{\hline
 around => \_guess\_natural\_number() : Roman \\
 }}}
 \rput(4,1){\rnode{D}{%
  \umlClass{App::Math::Tutor::Role::Natural}{\hline
 \_check\_natural\_number() : bool \\
 \_guess\_natural\_number() : Natural \\
 get\_natural\_number() : [ Natural ]
 }}}
 \rput(4,9){\rnode{E}{%
  \umlClass{RomanNum}{
  \hline
  \_stringify() : Str \\
 }}}
 \rput(4,6){\rnode{F}{%
  \umlClass{Natural}{
  value\\
  \hline
  \_stringify() : Str \\
  \_numify() : Num \\
  \_num\_compare() : Int \\
 }}}
 \rput(13,2){\rnode{G}{%
  \umlClass{App::Math::Tutor::Role::Exercise}{
  exercise : lazy \\
  \# \{ section, caption, label, \\
  \#    header, challenges, solutions \}\\
  output\_name : lazy\\
  template\_filename : lazy\\
  \hline
  \_build\_exercise() = 0 : exercise\\
  \_build\_output\_name() : Str\\
  \_build\_template\_filename() = 0 : Str\\
  execute()
 }}}
\end{pspicture}
\ncN{B}{A} % App::Math::Tutor::Cmd::Roman::Cmd::Add -> App::Math::Tutor::Role::NaturalExercise
\ncputicon[npos=0]{umlV}
\ncEXN{D}{B} % App::Math::Tutor::Role::NaturalExercise -> App::Math::Tutor::Role::Natural
\ncputicon[npos=0]{umlV}
\ncN{G}{B} % App::Math::Tutor::Role::NaturalExercise -> App::Math::Tutor::Role::Exercise
\ncputicon[npos=0]{umlV}
\ncE{F}{B}
\ncputicon[npos=0]{umlAgreg}
\ncline[linestyle=dashed,linecolor=blue]{E}{A}
\ncN[linecolor=blue]{D}{C} % App::Math::Tutor::Role::Roman -> App::Math::Tutor::Role::Natural
\ncputicon[npos=0,linecolor=blue]{umlV}
\ncEVE[linecolor=blue]{C}{A} % App::Math::Tutor::Cmd::Roman::Cmd::Add -> App::Math::Tutor::Role::Roman
\ncputicon[npos=0,linecolor=blue]{umlV}
\ncN[linecolor=blue]{F}{E} % RomanNum -> Natural
\ncputicon[npos=0,linecolor=blue]{umlV}
} % end of resizebox
\end{block}

\end{frame}

\section{Improvements}

\begin{frame}[t,fragile]

\begin{block}<1->{Improving design}
\begin{itemize}
\item introduce factories
\uncover<2->{\item add lazy factory attribute \uncover<3->{(allowes overriding factory to use by \texttt{around}'ing builder)}}
\uncover<4->{\item separate \texttt{number} classes (type system, but \textbf{no} \texttt{MooseX::Types})}
\uncover<5->{\item approval for reasonable exercise value should be part of factory}
\uncover<6->{\item approval for valid number should be \texttt{coerce}d (\texttt{trigger}?)}
\end{itemize}
\end{block}

\begin{block}<7->{Design history}
\begin{itemize}
\item I started with just vulgar fraction exercises
\uncover<8->{\item Design covered exactly those needs}
\end{itemize}
\end{block}

\begin{block}<9->{Design futury}
\begin{itemize}
\item Modern Perl-OO allowes easy refactoring to apply above improvements
\end{itemize}
\end{block}

\end{frame}

\part{Moo eXtensions for CLI}

\section{MooX in general}

\begin{frame}[t,fragile]
\frametitle{MooX in general}

Some Moo extensions for getting a picture - the list is neither complete nor is it intended to be

\begin{block}<1->{MooX Distributions}
\begin{description}
\item[MooX::Log::Any] logging role building a very lightweight wrapper to Log::Any
\uncover<2->{\item[MooX::Validate] minimalist Data Validation for Moo}
\uncover<3->{\item[MooX::Types::MooseLike] Moose like types for Moo}
\uncover<4->{\item[MooX::Override] adds "override method =\textgreater{} sub {\ldots}" support to Moo}
\uncover<5->{\item[MooX::Augment] adds "augment method =\textgreater{} sub {\ldots}" support to Moo}
\uncover<6->{\item[MooX::late] easily translate Moose code to Moo}
\uncover<7->{\item[MooX::PrivateAttributes] create attribute only usable inside your package}
\uncover<8->{\item[MooX::Singleton] turn your Moo class into singleton}
\uncover<9->{\item[MooX::Aliases] easy aliasing of methods and attributes in Moo}
\end{description}
\end{block}

\end{frame}

\section{MooX for CLI}

\begin{frame}[t,fragile]{MooX Distributions for CLI}
\frametitle{MooX Distributions for CLI}

\begin{block}<1->{MooX::Cmd}
\begin{itemize}
\item giving an easy Moo style way to make command organized CLI apps
\item support sub-commands with separated options when used together with MooX::Options
\end{itemize}
\end{block}

\begin{block}<2->{MooX::Options}
\begin{itemize}
\item explicit Options eXtension for Object Class
\item no mess with composed attributes
\end{itemize}
\end{block}

\begin{block}<3->{MooX::ConfigFromFile}
\begin{itemize}
\item Moo eXtension for initializing objects from config file
\item RC files with structures (JSON, INI, YAML, XML, ...)
\end{itemize}
\end{block}

\end{frame}

\begin{frame}[fragile]{General CLI Construction Flow}

\resizebox{\textwidth}{!}{
\begin{pspicture}(25,18)%\psgrid
     % 
     \rput(2,17.5){\rnode{main}{\umlClass{\underline{:main}}{}}}
     \rput(6,17.5){\rnode{Cmd}{\umlClass{\underline{:MooX::Cmd}}{}}}
     \rput(11,17.5){\rnode{Options}{\umlClass{\underline{:MooX::Options}}{}}}
     \rput(16,17.5){\rnode{CFF}{\umlClass{\underline{:MooX::ConfigFromFile}}{}}}
     \rput(22,17.5){\rnode{Core}{\umlClass{\underline{:Moo}}{}}}

     %\\[+0.3cm] % 2: new_with_cmd()
     %{} & {} & {} & {} & {} \\[-0.6cm]
     %{} & {\rnode{bcc}{}\psframebox{\parbox[c][0.2cm][c]{0.8cm}{ }}} & {} & {} & {} \\[-0.8cm] % 4: load cmds / build cmd name hash
     %{} & {\rnode{bccE}{}} & {} & {} & {} \\[-0.6cm]
     %{} & {} & {} & {} & {} \\[-0.2cm] % 6: separate arguments
     %{} & {} & {} & {} & {} \\[-0.6cm]
     %{} & {} & {} & {} & {} \\[-0.2cm] % 8: new_with_options
     %{} & {} & {} & {} & {} \\[-0.6cm]
     %{} & {} & {} & {} & {} \\[-0.2cm] % 10: parse @ARGV
     %{} & {} & {} & {} & {} \\[-0.6cm]
     %{} & {} & {} & {} & {} \\[-0.2cm] % 12: new
     %{} & {} & {} & {} & {} \\[-0.6cm]
     %{} & {} & {} & {} & {} \\[-0.2cm] % 14: Moo::BUILDARGS
     %{} & {} & {} & {} & {} \\[-0.6cm]
     %{} & {} & {} & {} & {} \\[-0.2cm] % 16: CFF::BUILDARGS
     %{} & {} & {} & {} & {} \\[-0.6cm]
     %{} & {} & {} & {} & {} \\[-0.2cm] % 18: _build_loaded_config
     %{} & {} & {} & {} & {} \\[-0.6cm]
     %{} & {} & {} & {} & {} \\[-0.2cm] % 20: catch "attribute missing" {}
     %{} & {} & {} & {} & {} \\[-0.6cm]
     %{} & {} & {} & {} & {} \\[-0.2cm] % 22: execute
     %{} & {} & {} & {} & {} \\[-0.6cm]
     %% 
     %{} & {} \\[0cm] % 24 ([0cm] necessary : bug ?)
     %
     \rput(2,1){\rnode{mainEnd}{ }}
     \rput(6,1){\rnode{CmdEnd}{}}
     \rput(11,1){\rnode{OptionsEnd}{}}
     \rput(16,1){\rnode{CFFEnd}{}}
     \rput(22,1){\rnode{CoreEnd}{}}
     \ncline[linestyle=dashed]{main}{mainEnd}
     \ncline[linestyle=dashed]{Cmd}{CmdEnd}
     \ncline[linestyle=dashed]{Options}{OptionsEnd}
     \ncline[linestyle=dashed]{CFF}{CFFEnd}
     \ncline[linestyle=dashed]{Core}{CoreEnd}

     \psframe[linewidth=0.5pt,linestyle=solid,fillstyle=solid,fillcolor=white](1.8,16.5)(2.2,1.5)
     \psframe[linewidth=0.5pt,linestyle=solid,fillstyle=solid,fillcolor=white](5.8,16.5)(6.2,1.5)
     \rput(2.2,16.5){\rnode{main2nwc}{}}
     \rput(5.8,16.5){\rnode{nwcS}{}} % new_with_cmd_Start
     \rput(5.8,1.5){\rnode{nwcE}{}} % new_with_cmd_End
     \rput(2.2,1.5){\rnode{mainC}{}} % main Continue / exit
     \ncline[linewidth=0.5pt,linestyle=solid]{->}{main2nwc}{nwcS}\naput*[Ynodesep=0.5]{\small new\_with\_cmd()}

     \rput(6.2,16.25){\rnode{bccS}{}}
     \rput(6.2,14.75){\rnode{bccE}{}}
     \ncEVW[linewidth=0.5pt,linestyle=solid]{bccE}{bccS}
     \ncputicon[npos=0]{umlV}
     \nbput*[nrot=:U,npos=1.25]{\small \_bcc}%\_build\_command\_commands()

     \rput(6.2,14.25){\rnode{savS}{}}
     \rput(6.2,12.75){\rnode{savE}{}}
     \ncEVW[linewidth=0.5pt,linestyle=solid]{savE}{savS}
     \ncputicon[npos=0]{umlV}
     \nbput*[nrot=:U,npos=1.25]{\small \_split\_argv}

     \psframe[linewidth=0.5pt,linestyle=solid,fillstyle=solid,fillcolor=white](10.8,12.5)(11.2,3.5)
     \rput(6.2,12.5){\rnode{nwc2cc}{}} % new_with_cmd -> _chained_constructor
     \rput(10.8,12.5){\rnode{nwoS}{}} % new_with_options_Start
     \rput(10.8,3.5){\rnode{nwoE}{}} % new_with_options_End
     \rput(6.2,3.5){\rnode{nwcC}{}} % new_with_cmd Continue
     \ncline[linewidth=0.5pt,linestyle=solid]{->}{nwc2cc}{nwoS}\naput*[Ynodesep=0.5]{\small new\_with\_options()}

     \rput(11.2,12.25){\rnode{poS}{}}
     \rput(11.2,10.75){\rnode{poE}{}}
     \ncEVW[linewidth=0.5pt,linestyle=solid]{poE}{poS}
     \ncputicon[npos=0]{umlV}
     \nbput*[nrot=:U,npos=1.25]{\small \_parse\_options}

     \psframe[linewidth=0.5pt,linestyle=solid,fillstyle=solid,fillcolor=white](21.6,9)(22,8.25)
     \psframe[linewidth=0.5pt,linestyle=solid,fillstyle=solid,fillcolor=white](21.8,10.5)(22.2,5.5)
     \rput(11.2,10.5){\rnode{nwo2new}{}} % new_with_options -> new
     \rput(21.8,10.5){\rnode{newS}{}} % new_Start
     \rput(21.8,5.5){\rnode{newE}{}} % new_End
     \rput(11.2,5.5){\rnode{nwoC}{}} % new_with_options Continue
     \ncline[linewidth=0.5pt,linestyle=solid]{->}{nwo2new}{newS}\naput*[Ynodesep=0.5]{\small new()}

     \psframe[linewidth=0.5pt,linestyle=solid,fillstyle=solid,fillcolor=white](15.8,9.5)(16.2,6)
     \rput(21.8,9.5){\rnode{new2blda}{}} % new -> BUILDARGS
     \rput(16.2,9.5){\rnode{aBS}{}} % around BUILDARGS => Start
     \rput(16.2,6){\rnode{aBE}{}} % around BUILDARGS => End
     \rput(21.8,6){\rnode{newC}{}} % new Continue
     \ncline[linewidth=0.5pt,linestyle=solid]{->}{new2blda}{aBS}\nbput*[Ynodesep=0.5]{\small BUILDARGS()}

     \rput(16.2,8.75){\rnode{baC}{}} % BUILDARGS Call
     \rput(21.6,8.75){\rnode{baS}{}} % BUILDARGS Start
     \ncline[linewidth=0.5pt,linestyle=solid]{->}{baC}{baS}\naput*[Ynodesep=0.5]{\small super-\textgreater{}BUILDARGS()}
     \rput(21.6,8.5){\rnode{baE}{}} % BUILDARGS Start
     \rput(16.2,8.5){\rnode{aBC}{}} % around BUILDARGS => Continue
     \ncline[linewidth=0.5pt,linestyle=solid]{->}{baE}{aBC}

     \rput(16.2,8){\rnode{blcS}{}} % _build_loaded_config Start
     \rput(16.2,6.5){\rnode{blcE}{}} % _build_loaded_config End
     \ncEVW[linewidth=0.5pt,linestyle=solid]{blcE}{blcS}
     \ncputicon[npos=0]{umlV}
     \nbput*[nrot=:U,npos=1.25]{\small \_build\_loaded\_config}
     \ncline[linewidth=0.5pt,linestyle=solid]{->}{aBE}{newC} % around BUILDARGS => End -> new Continue
     \ncline[linewidth=0.5pt,linestyle=solid]{->}{newE}{nwoC} % new End -> new_with_options Continue

     \rput(11.2,5.25){\rnode{hoeS}{}}
     \rput(11.2,3.75){\rnode{hoeE}{}}
     \ncEVW[linewidth=0.5pt,linestyle=solid]{hoeE}{hoeS}
     \ncputicon[npos=0]{umlV}
     \nbput*[nrot=:U,npos=1.25]{\small help on exception}

     \ncline[linewidth=0.5pt,linestyle=solid]{->}{nwoE}{nwcC} % new_with_options_End -> new_with_cmd Continue

     \rput(6.2,3.25){\rnode{eS}{}} % execute Start
     \rput(6.2,1.75){\rnode{eE}{}} % execute End
     \ncEVW[linewidth=0.5pt,linestyle=solid]{eE}{eS}
     \ncputicon[npos=0]{umlV}
     \nbput*[nrot=:U,npos=1.25]{\small execute}

     \ncline[linewidth=0.5pt,linestyle=solid]{->}{nwcE}{mainC}
     %
     %
     \small\ttfamily% Functions
     \psset{labelsep=1.5mm}
     %\ncbox*[linecolor=lightgray]{->}{2,2}{3,2}
     %\ncline[linewidth=0.5pt,linestyle=solid]{->}{2,1}{2,2}\naput*[Ynodesep=0.5]{\small new\_with\_cmd()}
     %\ncbar[linewidth=0.5pt,linestyle=solid,linecolor=red,angle=90,arrows=->]{bcc}{bccE}%\naput*[Ynodesep=0.25]{\_build\_command\_commands()}
     %\ncline[linewidth=0.5pt,linestyle=solid]{->}{5,2}{5,1}%\naput*{}
     %\ncline[linewidth=0.5pt,linestyle=solid]{->}{6,1}{6,2}\naput*[Ynodesep=0.75]{identifyDaemon()}
     %\ncline[linewidth=0.5pt,linestyle=solid]{->}{7,2}{7,1}%\naput*{}
     %\ncline[linewidth=0.5pt,linestyle=solid]{->}{8,1}{8,2}\naput*{fetchData()}
     %\ncline[linewidth=0.5pt,linestyle=solid]{->}{9,2}{9,1}%\naput*{}
     %\ncline[linewidth=0.5pt,linestyle=solid]{->}{10,1}{10,2}\naput*{convert()}
     %\ncline[linewidth=0.5pt,linestyle=solid]{->}{11,2}{11,1}%\naput*{}
     %\ncline[linewidth=0.5pt,linestyle=solid]{->}{12,1}{12,2}\naput*{createMessages()}
     %\ncline[linewidth=0.5pt,linestyle=solid]{->}{13,2}{13,1}%\naput*{}
     %\ncline[linewidth=0.5pt,linestyle=solid]{->}{14,1}{14,2}\naput*{prove()}
     %\ncline[linewidth=0.5pt,linestyle=solid]{->}{15,2}{15,1}%\naput*{}
     %\ncline[linewidth=0.5pt,linestyle=solid]{->}{16,1}{16,2}\naput*{report()}
     %\ncline[linewidth=0.5pt,linestyle=solid]{->}{17,2}{17,1}%\naput*{}
     %\ncline[linewidth=0.5pt,linestyle=solid]{->}{23,2}{23,1}%\nbput*{}
     %
     % 
\end{pspicture}
}%end resizebox

\end{frame}

\part{Finish}

\section{Conclusion}

\begin{frame}[t,fragile]

\begin{block}<1->{Conclusion}
\begin{itemize}
\item lazy attributes allow designing a multi-stage initialization phase
\uncover<2->{\item benefit of common runtime (faster load) when using}
\uncover<3->{
\begin{itemize}
\item DBIx::Class
\item Web::Simple (Jedi)
\end{itemize}}
\uncover<4->{\item improve design by}
\begin{itemize}
\uncover<5->{\item using roles for behavioral design (avoid duck typing)}
\uncover<6->{\item using explicit patterns for clear separation of concerns}
\uncover<6->{\item express intensions clearer for method overloading by using \textit{method modifiers}}
\end{itemize}
\end{itemize}
\end{block}

\end{frame}

%\begin{frame}[t,fragile]

%\begin{block}<n->{}
%\begin{itemize}
%\item
%\end{itemize}
%\end{block}

%\end{frame}

\section{Resources}

% RESOURCES
\begin{frame}[t,fragile]
\frametitle{Resources}
\begin{block}<1->{Software}
\url{https://metacpan.org/pod/Moo/} \\
\url{https://github.com/moose/Moo} \\
\url{https://metacpan.org/search?q=MooX} \\
\url{https://metacpan.org/pod/MooX::Cmd} \\
\url{https://metacpan.org/pod/MooX::Options} \\
\url{https://metacpan.org/pod/MooX::ConfigFromFile} \\
\url{https://github.com/rehsack/App-Math-Tutor}
\end{block}

\begin{block}<2->{IRC}
\url{irc://irc.perl.org/#moose} \\
\url{irc://irc.perl.org/#web-simple}
\end{block}
\end{frame}

% THANKS
\begin{frame}[fragile]
\frametitle{Thank You For Listening}
\begin{block}<1->{Questions?}
Jens Rehsack \textless{}\href{mailto:rehsack@cpan.org}{rehsack@cpan.org}\textgreater{}
\end{block}
\end{frame}

\end{document}
